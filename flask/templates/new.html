<div class="card">
    <div class="card-body">

        <script>
            function create_room() {
                let j = jform("#CreateRoom");
                let username = j.username;
                delete j.username;
                post("/new_room", j)
                    .done((r) => {
                        let room_id = r.room_id;
                        post("/join_room/" + room_id + "/" + username, {
                                password: j.password
                            })
                            .done(() => {
                                redirect("/room/" + room_id);
                            });
                    });
            }
        </script>


        <form id="CreateRoom" action="javascript:create_room()">
            <div class="form-group">
                <label for="CreateRoomName">{{_("Room name")}}</label>
                <input type="name" name="name" class="form-control" id="CreateRoomName" placeholder="Room name">
            </div>
            <div class="form-group">
                <label for="CreateRoomUsername">{{_("Username")}}</label>
                <input type="username" name="username" class="form-control" id="CreateRoomUsername" placeholder="Username">
            </div>
            <div class="form-group">
                <label for="CreateRoomPassword">{{_("Room password")}}</label>
                <input type="password" name="password" class="form-control" id="CreateRoomPassword" placeholder="Password">
            </div>
            <div class="form-group">
                {{_("Time")}}<br>
                <select id="time" name="time" required>
                    <option value="30">30 sec</option>
                    <option value="45">45 sec</option>
                    <option value="60">60 sec</option>
                    <option value="90">90 sec</option>
                </select>
            </div>
            <div class="form-group">
                {{_("Max players")}}<br>
                <input type="number" id="user_count_max" name="user_count_max" min="2" max="10" value="5" size="4">
            </div>
            <button type="submit" class="btn btn-primary w-100">{{_("Create room")}}</button>
        </form>
    </div>
</div>
